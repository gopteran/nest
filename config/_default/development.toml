# Development and Build Configuration
# This file contains development, build, and deployment settings

[params]
  # Development Settings
  [params.development]
    # Development mode indicators
    showDevBanner = true
    devBannerText = 'Development Mode'
    devBannerColor = '#ff6b6b'

    # Debug settings
    enableDebug = true
    showBuildInfo = true
    showHugoVersion = true

    # Development tools
    [params.development.tools]
      enableLivereload = true
      enableSourceMaps = true
      enableErrorPages = true
      showTemplateErrors = true

  # Environment-Specific Settings
  [params.environments]
    [params.environments.development]
      baseURL = 'http://localhost:1313'
      buildDrafts = true
      buildFuture = true
      enableGitInfo = true
      googleAnalytics = ''
      disableKinds = ['taxonomy', 'term']

    [params.environments.staging]
      baseURL = 'https://staging.gopteran.dev'
      buildDrafts = false
      buildFuture = true
      enableGitInfo = true
      googleAnalytics = 'G-STAGING-ID'

    [params.environments.production]
      baseURL = 'https://gopteran.dev'
      buildDrafts = false
      buildFuture = false
      enableGitInfo = true
      googleAnalytics = 'G-PRODUCTION-ID'
      minify = true

  # CI/CD Configuration
  [params.cicd]
    enable = true
    [params.cicd.github]
      enable = true
      repository = 'gopteran/nest'
      branch = 'main'
      workflow = '.github/workflows/deploy.yml'

    [params.cicd.build]
      enable = true
      command = 'hugo --minify'
      outputDir = 'public'

    [params.cicd.deploy]
      enable = true
      provider = 'netlify' # netlify, vercel, github-pages, s3
      command = 'hugo deploy'

  # Testing Configuration
  [params.testing]
    enable = true
    [params.testing.html]
      enable = true
      checkExternalLinks = false
      checkInternalLinks = true

    [params.testing.accessibility]
      enable = true
      level = 'AA' # A, AA, AAA

    [params.testing.performance]
      enable = true
      lighthouse = true
      pagespeed = true

    [params.testing.seo]
      enable = true
      checkMetaTags = true
      checkStructuredData = true

  # Quality Assurance
  [params.qa]
    enable = true
    [params.qa.checks]
      spellcheck = true
      grammar = true
      readability = true
      seo = true

    [params.qa.reports]
      enable = true
      format = 'html' # html, json, markdown
      outputDir = 'reports'

  # Performance Monitoring
  [params.performance]
    enable = true
    [params.performance.webvitals]
      enable = true
      trackingId = 'web-vitals-id'

    [params.performance.bundle]
      enable = true
      analyzer = true
      budget = 500000 # 500KB

    [params.performance.caching]
      enable = true
      strategy = 'stale-while-revalidate'

  # Error Handling
  [params.errors]
    enable = true
    [params.errors.pages]
      404 = '/404.html'
      500 = '/500.html'

    [params.errors.logging]
      enable = true
      provider = 'sentry' # sentry, rollbar, bugsnag
      dsn = 'your-error-tracking-dsn'

    [params.errors.monitoring]
      enable = true
      alertOnErrors = true
      errorThreshold = 10

  # Backup and Recovery
  [params.backup]
    enable = true
    [params.backup.content]
      enable = true
      frequency = 'daily'
      retention = '30d'

    [params.backup.database]
      enable = false
      frequency = 'hourly'
      retention = '7d'

    [params.backup.media]
      enable = true
      frequency = 'weekly'
      retention = '1y'

  # Monitoring and Alerting
  [params.monitoring]
    enable = true
    [params.monitoring.uptime]
      enable = true
      provider = 'uptimerobot' # uptimerobot, pingdom, statuscake
      apiKey = 'your-uptime-api-key'

    [params.monitoring.analytics]
      enable = true
      provider = 'google-analytics'
      dashboard = 'https://analytics.google.com'

    [params.monitoring.logs]
      enable = true
      provider = 'datadog' # datadog, logrocket, sentry
      apiKey = 'your-logging-api-key'

  # Feature Flags
  [params.features]
    enable = true
    [params.features.flags]
      newDesign = true
      betaFeatures = false
      experimental = false
      darkMode = true
      comments = true
      newsletter = true

    [params.features.rollout]
      percentage = 100
      users = []

  # A/B Testing
  [params.abtesting]
    enable = false
    [params.abtesting.tests]
      [params.abtesting.tests.design]
        enable = true
        variants = ['original', 'new']
        distribution = [50, 50]

      [params.abtesting.tests.cta]
        enable = true
        variants = ['button', 'link']
        distribution = [70, 30]

  # Rollback Configuration
  [params.rollback]
    enable = true
    [params.rollback.versions]
      keep = 10
      retention = '30d'

    [params.rollback.automatic]
      enable = false
      threshold = 5 # percentage of errors

  # Documentation
  [params.docs]
    enable = true
    [params.docs.auto]
      enable = true
      format = 'markdown'
      outputDir = 'docs/auto'

    [params.docs.api]
      enable = true
      source = 'api.json'
      format = 'openapi'

  # Collaboration
  [params.collaboration]
    enable = true
    [params.collaboration.git]
      enable = true
      repository = 'https://github.com/gopteran/nest'
      branch = 'main'

    [params.collaboration.cms]
      enable = false
      provider = 'forestry' # forestry, netlify-cms, decap-cms
      config = 'static/admin/config.yml'

# Build Configuration
[build]
  # Build optimization
  writeStats = false
  noJSConfigInAssets = false
  useResourceCacheWhen = 'always'

  # Build statistics
  [build.buildStats]
    enable = true
    [build.buildStats.storages]
      [build.buildStats.storages."memcache"]
        enable = true
      [build.buildStats.storages."filesystem"]
        enable = true
