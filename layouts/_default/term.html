{{ define "main" }}
<!-- Term Header -->
<header class="text-center mb-16">
    <!-- Breadcrumb -->
    <nav class="text-sm text-[var(--color-fg)]/60 mb-6">
        <div class="flex items-center justify-center gap-2">
            <a href="/" class="hover:text-[var(--color-primary)] transition-colors">Home</a>
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
            {{- with .Data.Taxonomy }}
            <a href="{{ .RelPermalink }}" class="hover:text-[var(--color-primary)] transition-colors capitalize">{{ .Title }}</a>
            <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
            {{- end }}
            <span class="text-[var(--color-primary)] font-medium">{{ .Title }}</span>
        </div>
    </nav>

    <!-- Term title with tag icon -->
    <div class="flex items-center justify-center gap-4 mb-6">
        <div class="w-16 h-16 bg-gradient-to-br from-[var(--color-sand)] to-[var(--color-growth)] rounded-[var(--radius-xl)] flex items-center justify-center shadow-lg">
            <svg class="w-8 h-8 text-[var(--color-neutral-dark)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"></path>
            </svg>
        </div>
        <h1 class="text-4xl md:text-5xl font-bold bg-gradient-to-r from-[var(--color-primary)] to-[var(--color-secondary)] bg-clip-text text-transparent leading-tight">{{ .Title }}</h1>
    </div>

    <div class="w-24 h-1 bg-gradient-to-r from-[var(--color-sand)] to-[var(--color-growth)] mx-auto mb-8 rounded-full"></div>

    {{- if .Content }}
    <div class="prose prose-lg max-w-3xl mx-auto text-[var(--color-fg)]/70 mb-8">{{ .Content }}</div>
    {{- end }} {{- if .Pages }}
    <div class="flex items-center justify-center gap-4 text-sm text-[var(--color-fg)]/60">
        <svg class="w-4 h-4 text-[var(--color-secondary)]" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
        <span>{{ len .Pages }} {{ if eq (len .Pages) 1 }}post{{ else }}posts{{ end }} tagged with "{{ .Title }}"</span>
    </div>
    {{- end }}
</header>

<!-- Posts Grid -->
{{- if .Pages }}
<section>
    <div class="grid gap-8 md:grid-cols-2 lg:grid-cols-3">
        {{ range .Pages }}
        <article class="group relative">
            <!-- Card -->
            <div class="bg-[var(--color-bg)] rounded-[var(--radius-xl)] shadow-lg hover:shadow-2xl transition-all duration-500 p-8 border border-[var(--color-neutral-light)] hover:border-[var(--color-secondary)] transform hover:-translate-y-2 h-full flex flex-col">
                <!-- Meta info -->
                <div class="flex items-center justify-between mb-4">
                    {{- if .Date }} {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }} {{ $dateHuman := .Date | time.Format "Jan 2, 2006" }}
                    <time datetime="{{ $dateMachine }}" class="flex items-center gap-2 text-xs text-[var(--color-fg)]/60">
                        <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                        </svg>
                        {{ $dateHuman }}
                    </time>
                    {{- end }} {{- if .Section }}
                    <span class="px-2 py-1 bg-[var(--color-secondary)]/10 text-[var(--color-secondary)] text-xs rounded-[var(--radius-base)] font-medium capitalize"> {{ .Section }} </span>
                    {{- end }}
                </div>

                <!-- Content -->
                <div class="flex-1">
                    <h3 class="text-xl font-bold text-[var(--color-primary)] mb-3 group-hover:text-[var(--color-secondary)] transition-colors line-clamp-2">{{ .LinkTitle }}</h3>
                    <p class="text-[var(--color-fg)]/70 leading-relaxed line-clamp-3 mb-4">{{ .Summary | default site.Params.ui.defaultSummary }}</p>
                </div>

                <!-- Additional tags (excluding current term) -->
                {{- $currentTerm := $.Title }} {{- with .Params.tags }} {{- $otherTags := slice }} {{- range . }} {{- if ne . $currentTerm }} {{- $otherTags = $otherTags | append . }} {{- end }} {{- end }} {{- if $otherTags }}
                <div class="flex flex-wrap gap-2 mb-4">
                    {{- range first 2 $otherTags }}
                    <span class="px-2 py-1 bg-[var(--color-sand)]/20 text-[var(--color-primary)] text-xs rounded-[var(--radius-base)] font-medium"> {{ . }} </span>
                    {{- end }} {{- if gt (len $otherTags) 2 }}
                    <span class="px-2 py-1 bg-[var(--color-neutral-light)] text-[var(--color-fg)]/60 text-xs rounded-[var(--radius-base)] font-medium"> +{{ sub (len $otherTags) 2 }} more </span>
                    {{- end }}
                </div>
                {{- end }} {{- end }}

                <!-- Read more link -->
                <a href="{{ .RelPermalink }}" class="inline-flex items-center gap-2 text-[var(--color-primary)] font-semibold hover:text-[var(--color-secondary)] transition-colors group/link">
                    <span>Read Article</span>
                    <svg class="w-4 h-4 transform group-hover/link:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
                    </svg>
                </a>

                <!-- Hover effect overlay -->
                <div class="absolute inset-0 bg-gradient-to-br from-[var(--color-primary)]/5 to-[var(--color-secondary)]/5 rounded-[var(--radius-xl)] opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"></div>
            </div>
        </article>
        {{ end }}
    </div>

    <!-- Back to taxonomy link -->
    {{- with .Data.Taxonomy }}
    <div class="text-center mt-16">
        <a href="{{ .RelPermalink }}" class="inline-flex items-center gap-3 px-6 py-3 border-2 border-[var(--color-primary)] text-[var(--color-primary)] font-semibold rounded-[var(--radius-lg)] hover:bg-[var(--color-primary)] hover:text-[var(--color-neutral-light)] transition-colors">
            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
            <span>Browse All {{ .Title }}</span>
        </a>
    </div>
    {{- end }}
</section>
{{- else }}
<!-- Empty state -->
<div class="text-center py-16">
    <div class="w-16 h-16 bg-[var(--color-neutral-light)] rounded-full flex items-center justify-center mx-auto mb-6">
        <svg class="w-8 h-8 text-[var(--color-fg)]/40" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
        </svg>
    </div>
    <h3 class="text-xl font-semibold text-[var(--color-fg)]/70 mb-2">No posts found</h3>
    <p class="text-[var(--color-fg)]/60">No content has been tagged with "{{ .Title }}" yet.</p>
</div>
{{- end }} {{ end }}
