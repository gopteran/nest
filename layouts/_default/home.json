{{- $data := dict
  "title" .Site.Title
  "description" .Site.Params.description
  "url" .Site.BaseURL
  "buildDate" (now.Format "2006-01-02T15:04:05Z07:00")
  "generator" (printf "Hugo %s" hugo.Version)
  "version" "1.0"
  "language" .Site.Language.Lang
  "pages" (slice)
  "sections" (slice)
-}}
{{- range .Site.RegularPages -}}
  {{- $data = merge $data (dict "pages" (append ($data.pages) (dict
    "title" .Title
    "url" .Permalink
    "date" (.Date.Format "2006-01-02")
    "summary" .Summary
    "tags" .Params.tags
  ))) -}}
{{- end -}}
{{- range .Site.Sections -}}
  {{- $data = merge $data (dict "sections" (append ($data.sections) (dict
    "title" .Title
    "url" .Permalink
    "pages" (len .RegularPages)
  ))) -}}
{{- end -}}
{{ $data | jsonify (dict "indent" "  ") }}
